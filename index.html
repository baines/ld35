<html>
<head>
<title>VampShift: The Bloodening</title>
<style>
html {
	font-size: 11px;
	font-family: 'Liberation Mono', Consolas, monospace;
	color: #fff;
	background-color: #1B1825;
}

body {
	text-align: center;
	margin: 10px auto;
	width: 844px;
}

#main {
	background: #000;
	color: #fff;
	font-size: 20px;
	border: 6px double #fff;
	margin: 10px 0;
}

a:link {
	color: #fff;
	text-decoration: underline;
}

.emscripten {
	border: 0px none;
}
</style>
</head>
<body>
<img src="webheader.png" />
<div id="main">
<canvas class="emscripten" id="canvas">Loading...</canvas>
</div>
<a href="http://ludumdare.com/compo/ludum-dare-35/?action=preview&uid=64951">View on Ludum Dare</a>
<p>
NOTE: This emscripten port was created after the Ludum Dare compo, and has a few
differences in physics / timing etc.
</p>
<script>
var Module = {
	preRun: [],
	postRun: [],
	canvas: (function() {
		var canvas = document.getElementById('canvas');
		canvas.addEventListener("webglcontextlost", function(e){
			alert('WebGL context lost. You will need to reload the page.');
			e.preventDefault();
		}, false);
		return canvas;
	})(),
};
</script>
<script>

var webgl_support = true;

try {
	var canvas = document.createElement('canvas');
	var ctx = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
	var exts = ctx.getSupportedExtensions();
} catch (e) {
	webgl_support = false;
	document.getElementById('main').innerHTML = "WebGL not supported :(";
}

(function() {
	if(!webgl_support) return;
	var memoryInitializer = 'webgame.html.mem';
	if (typeof Module['locateFile'] === 'function') {
		memoryInitializer = Module['locateFile'](memoryInitializer);
	} else if (Module['memoryInitializerPrefixURL']) {
		memoryInitializer = Module['memoryInitializerPrefixURL'] + memoryInitializer;
	}
	var xhr = Module['memoryInitializerRequest'] = new XMLHttpRequest();
	xhr.open('GET', memoryInitializer, true);
	xhr.responseType = 'arraybuffer';
	xhr.send(null);
})();

if(webgl_support){
	var script = document.createElement('script');
	script.src = "webgame.js";
	document.body.appendChild(script);
}
</script>
</body>
</html>
